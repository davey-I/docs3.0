<!DOCTYPE html>
<html><head>
<title data-folder-path="/Tocco">Mitarbeiter</title>
<link href=" ../../static/style.css" rel="stylesheet"/>
<link href="../../prism/prism.css" rel="stylesheet"/>
</head>
<body class="body">
<div class="page-folder-header-div">
<h1 class="pagetitle" data-folder-path="Tocco">Mitarbeiter</h1>
<a href="./../..">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<path d="M3 11L12 4L21 11"></path>
<path d="M5 10V20H19V10"></path>
<path d="M10 20V14H14V20"></path>
</svg>
</a>
</div>
<!-- Sidebar -->
<div class="sidbear-enclosure-open" id="sidbear-enclosure-open-Mitarbeiter">
<button class="sidbear-enclosure-button-open" id="sidbear-enclosure-button-Mitarbeiter" onclick="toggle_sidebar()" type="button">
<svg fill="white" height="30" viewBox="0 0 100 80" width="30" xmlns="http://www.w3.org/2000/svg">
<rect height="10" width="100"></rect>
<rect height="10" width="100" y="30"></rect>
<rect height="10" width="100" y="60"></rect>
</svg>
</button>
<div class="sidebar-mainbox-open" id="sidebar-mainbox-Mitarbeiter">
<div class="sidebar-subbox-open" id="sidebar-subbox-1" onclick=" append_foldable_content()">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<circle cx="12" cy="12" r="10"></circle>
<line x1="12" x2="12" y1="8" y2="16"></line>
<line x1="8" x2="16" y1="12" y2="12"></line>
</svg>
</div>
<div class="sidebar-subbox-open" id="sidebar-subbox-2">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<circle cx="12" cy="12" r="10"></circle>
<path d="M9.09 9C9.32591 8.33109 9.78918 7.76807 10.4 7.41421C11.0108 7.06036 11.7266 6.93913 12.4152 7.07107C13.1038 7.20302 13.7206 7.57857 14.162 8.12132C14.6034 8.66407 14.8397 9.33984 14.83 10.03C14.83 12 12.5 12.5 12.5 14"></path>
<circle cx="12" cy="17" r="1"></circle>
</svg>
</div>
<div class="sidebar-subbox-open" id="sidebar-subbox-3">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<circle cx="12" cy="12" r="10"></circle>
<path d="M9.09 9C9.32591 8.33109 9.78918 7.76807 10.4 7.41421C11.0108 7.06036 11.7266 6.93913 12.4152 7.07107C13.1038 7.20302 13.7206 7.57857 14.162 8.12132C14.6034 8.66407 14.8397 9.33984 14.83 10.03C14.83 12 12.5 12.5 12.5 14"></path>
<circle cx="12" cy="17" r="1"></circle>
</svg>
</div>
</div>
</div>
<script src="../../prism/prism.js"></script>
<script src="../../static/script.js"></script>
<!--## Zeiterfassung #################################################################################################################-->
<div class="foldable-container" id="foldcontainer-Zeiterfassung">
<h2 class="foldable-title" id="foldable-title-Zeiterfassung">Zeiterfassung</h2>
<button class="foldable-content-unfoldbutton" id="foldable-content-unfoldbutton-newchapter" onclick="toggleFoldableContent('Zeiterfassung')" type="button">
<svg class="arrow-icon" fill="currentColor" height="16" viewBox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10l5 5 5-5H7z"></path>
</svg>
</button>
<button class="foldable-content-edittoggle" onclick="fetchEditableContent('Mitarbeiter','editable-paragraph-Zeiterfassung', 'foldable-content-penButton-Zeiterfassung')" type="button">
<svg class="wrench-icon" fill="currentColor" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M22.7 19.3l-4.1-4.1c.6-1.1.9-2.3.9-3.5 0-3.9-3.1-7-7-7-1.3 0-2.5.3-3.5.9l3.3 3.3-4 4-3.3-3.3C4.3 10.5 4 11.7 4 13c0 3.9 3.1 7 7 7 1.3 0 2.5-.3 3.5-.9l4.1 4.1c.4.4 1 .4 1.4 0l2.7-2.7c.4-.4.4-1 0-1.4z"></path>
</svg>
</button>
<button class="create-subdiv" id="create-subdiv-Zeiterfassung" onclick="add_subdiv('editable-paragraph-Zeiterfassung')" type='*button"'>
<svg class="add-tag-icon" fill="none" height="22" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
<!-- < and > symbols -->
<path d="M6 8l-4 4 4 4"></path> <!-- Left angle bracket -->
<path d="M18 8l4 4-4 4"></path> <!-- Right angle bracket -->
<!-- Plus sign in center -->
<path d="M12 10v4"></path>
<path d="M10 12h4"></path>
</svg>
</button>
<div class="foldable-content folded" id="foldable-content-Zeiterfassung">
<button class="foldable-content-penButton-hidden" id="foldable-content-penButton-Zeiterfassung" onclick="save_editable_content('Mitarbeiter','editable-paragraph-Zeiterfassung', 'page-folder')" type="button">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<path d="M12 20h9"></path>
<path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"></path>
</svg>
</button>
<div class="editable-paragraph" contenteditable="false" id="editable-paragraph-Zeiterfassung"><h3>How many Ferien / Holidays left ?</h3>
<pre>- Login to <a href="https://www.tocco.ch/tocco/e/Timereport_record/list">TOCCO</a>


- Klick on the <b>Stammdaten</b> Icon in the middle of the Page
</pre></div>
</div>
</div>
<!--## user-management #################################################################################################################-->
<div class="foldable-container" id="foldcontainer-user-management">
<h2 class="foldable-title" id="foldable-title-user-management">user-management</h2>
<button class="foldable-content-unfoldbutton" id="foldable-content-unfoldbutton-newchapter" onclick="toggleFoldableContent('user-management')" type="button">
<svg class="arrow-icon" fill="currentColor" height="16" viewBox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10l5 5 5-5H7z"></path>
</svg>
</button>
<button class="foldable-content-edittoggle" onclick="fetchEditableContent('Mitarbeiter','editable-paragraph-user-management', 'foldable-content-penButton-user-management')" type="button">
<svg class="wrench-icon" fill="currentColor" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M22.7 19.3l-4.1-4.1c.6-1.1.9-2.3.9-3.5 0-3.9-3.1-7-7-7-1.3 0-2.5.3-3.5.9l3.3 3.3-4 4-3.3-3.3C4.3 10.5 4 11.7 4 13c0 3.9 3.1 7 7 7 1.3 0 2.5-.3 3.5-.9l4.1 4.1c.4.4 1 .4 1.4 0l2.7-2.7c.4-.4.4-1 0-1.4z"></path>
</svg>
</button>
<button class="create-subdiv" id="create-subdiv-user-management" onclick="add_subdiv('editable-paragraph-user-management')" type='*button"'>
<svg class="add-tag-icon" fill="none" height="22" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
<!-- < and > symbols -->
<path d="M6 8l-4 4 4 4"></path> <!-- Left angle bracket -->
<path d="M18 8l4 4-4 4"></path> <!-- Right angle bracket -->
<!-- Plus sign in center -->
<path d="M12 10v4"></path>
<path d="M10 12h4"></path>
</svg>
</button>
<div class="foldable-content folded" id="foldable-content-user-management">
<button class="foldable-content-penButton-hidden" id="foldable-content-penButton-user-management" onclick="save_editable_content('Mitarbeiter','editable-paragraph-user-management', 'page-folder')" type="button">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<path d="M12 20h9"></path>
<path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"></path>
</svg>
</button>
<div class="editable-paragraph" contenteditable="false" id="editable-paragraph-user-management"><pre><h3>Add users and mange users #user-management #user_management #user management</h3>


For SETUP, most information can be found in -&gt; <a href="https://docs.tocco.ch/organization/user_accounts.html">DOCS</a>
Only the "special" ones are mentioned here


Remove : Also mostly in -&gt; <a href="https://docs.tocco.ch/organization/user_accounts.html">DOCS</a>

<h4> Gerrit: Username finden:</h4>

<pre>  <code class="lang-bash">
        ssh into: git.tocco.ch
    
        root@git:~# vim /etc/nginx/.htpasswd
  </code>
</pre>
    
        <b>User</b> werden nur inaktiv gesetzt , in <b>.htpasswd</b> bleibt immer ein eintrag
        zurück pege meint schadet nicht das file zu cleanen, schmerzt aber auch
        nicht wenn wir es nicht tun..


 <b>wo password einfügen ?</b> 
      
        Der Befehl <span class="highlighteryellow">htpasswd</span> verlangt nach ausführung
        nach dem vorher erstellten Passwort.

    <b>DB-Command</b> nach VSHN puppet-remove
 
        In der Doku steht, wenn neue user added zu pupet-config / tocco-hierdatat
        1h warten und angegebenen command ausführen.
      
        Bei einem user-remove auch ?
        Nein, wird ja dann gemacht, wenn nächstes mal ein
        neuer user geadded wird

    <h4>  S3 Ansible-Fails </h4>

    <div class="frame">
      ! <b>ACHTUNG</b> : <span class="codebox">ansible-playbook playbook.yml -t s3</span> evtl. gestaffelt ausführen !

      Falls viele Anpassungen gemacht wurden und das Playbook lange nicht mehr lief
      kann es vorkommen, dass sämtliche Deployments auf OC neu erstellt werden auf einen chlapf
      dies braucht dann so viel RAM, dass die Pods sehr lange brauchen oder im schlimmsten fall
      nie mehr zurück kommen !

      Bevor ausführung, sicher nachfragen was alles ändern wird...


      <b>Gestaffel</b> im sinne von <span class="codebox">ansible-playbook playbook.yml -t s3 -l customer_[a-d]*</span>
      oder einfach <span class="codebox">ansible-playbook playbook.yml -t s3 -e batch=10</span>
    </div>

      Der Befehl für nach der Account Erstellung, <span class="codebox">ansible-playbook playbook.yml -t s3</span>
      Zeigt im Play Recap manchmal failed status an z.b. :
      examen : ok=18 failed=1    skipped=4    rescued=0    ignored=0
      mit Error : 

  <div>
      Domain BLABLABLA missing a valid <span class="highlighteryellow">spf record</span>. Ensure
      it contains 'include:spf.tocco.ch' and only exactly one
      record exists
  </div>
      Dies sind nur die, die keinen SPD-Record setzen wollen.
      Playbook kann trotzdem laufen gelassen werden.

</pre>
<div class="foldable-container" id="foldcontainer-wireguard-usersetup">
<h2 class="foldable-title" id="foldable-title-wireguard-usersetup">wireguard-usersetup</h2>
<button class="foldable-content-unfoldbutton" id="foldable-content-unfoldbutton-newchapter" onclick="toggleFoldableContent('wireguard-usersetup')" type="button">
<svg class="arrow-icon" fill="currentColor" height="16" viewBox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10l5 5 5-5H7z"></path>
</svg>
</button>
<button class="foldable-content-edittoggle" onclick="fetchEditableContent('Mitarbeiter','editable-paragraph-wireguard-usersetup', 'foldable-content-penButton-wireguard-usersetup')" type="button">
<svg class="wrench-icon" fill="currentColor" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M22.7 19.3l-4.1-4.1c.6-1.1.9-2.3.9-3.5 0-3.9-3.1-7-7-7-1.3 0-2.5.3-3.5.9l3.3 3.3-4 4-3.3-3.3C4.3 10.5 4 11.7 4 13c0 3.9 3.1 7 7 7 1.3 0 2.5-.3 3.5-.9l4.1 4.1c.4.4 1 .4 1.4 0l2.7-2.7c.4-.4.4-1 0-1.4z"></path>
</svg>
</button>
<div class="foldable-content folded" id="foldable-content-wireguard-usersetup">
<button class="foldable-content-penButton-hidden" id="foldable-content-penButton-wireguard-usersetup" onclick="save_editable_content('Mitarbeiter','editable-paragraph-wireguard-usersetup', 'page-folder')" type="button">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<path d="M12 20h9"></path>
<path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"></path>
</svg>
</button>
<div class="editable-paragraph" contenteditable="false" id="editable-paragraph-wireguard-usersetup"><pre><b>$group</b> - “admin” for operations, “user” for everyone else.


<b>$name </b>- User's name (i.e. jado for Jane Doe).


<b>$public_key</b> - Public key supplied by user.


- Link to the Setup Guide for Clients: <a href="https://docs.tocco.ch/ide/machine_setup.html#set-up-wireguard-vpn">WG-VPN</a> (Mac and Win Users can user the same Mac-Guide)


- Get the public key from the user and create
  The config with. The script for this task can 
  be found at : <span class="highlighterblue">/src/ansible/servers/gen-wg-key</span>


<pre><code class="lang-bash">
                  cd ${ANSIBLE_REPO}/servers/
                  ./gen-wg-key $group $name $public_key
</code></pre>
The script then prints content, that 
needs to be added to <span class="highlighterblue">inventory</span>
and <span class="highlighterblue">secrets.yml</span>


<div class="frame" style="max-width: 700px;">
  Addings in the Inventory must be ordered
  by the last digits of the IP-Adress (9,10,11 etc.)
  So that it gives an ascending order from top to bottom.
</div>


Once these changes are added, we run:
<div class="lang-bash"><pre>              ansible-playbook playbook.yml -t wireguard
                </pre></div>
And send the user config (printed content that
says something like "-----Config---- ...)"
to the user.
              
<h4>-- replace</h4>
<div class="content">
If for some reason, the key-pair for user XY
needs to be replaced, there is a argument <b>-- replace</b> 
built in to the python file: <span class="highlighterblue">src/ansible/servers/gen-wg-key</span>



  User must create a new key-pair, and send the pub-key again.


  Run script as usual: <b>./gen-wg-key --replace user dadi $PUB</b>


  Add new created config to inventory and PW to secret.yml
                    
</div>
</pre></div>
</div>
</div>
<!--## expired-ssh-keys #################################################################################################################-->
<div class="foldable-container" id="foldcontainer-expired-ssh-keys">
<h2 class="foldable-title" id="foldable-title-expired-ssh-keys">expired-ssh-keys</h2>
<button class="foldable-content-unfoldbutton" id="foldable-content-unfoldbutton-newchapter" onclick="toggleFoldableContent('expired-ssh-keys')" type="button">
<svg class="arrow-icon" fill="currentColor" height="16" viewBox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10l5 5 5-5H7z"></path>
</svg>
</button>
<button class="foldable-content-edittoggle" onclick="fetchEditableContent('Mitarbeiter','editable-paragraph-expired-ssh-keys', 'foldable-content-penButton-expired-ssh-keys')" type="button">
<svg class="wrench-icon" fill="currentColor" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M22.7 19.3l-4.1-4.1c.6-1.1.9-2.3.9-3.5 0-3.9-3.1-7-7-7-1.3 0-2.5.3-3.5.9l3.3 3.3-4 4-3.3-3.3C4.3 10.5 4 11.7 4 13c0 3.9 3.1 7 7 7 1.3 0 2.5-.3 3.5-.9l4.1 4.1c.4.4 1 .4 1.4 0l2.7-2.7c.4-.4.4-1 0-1.4z"></path>
</svg>
</button>
<div class="foldable-content folded" id="foldable-content-expired-ssh-keys">
<button class="foldable-content-penButton-hidden" id="foldable-content-penButton-expired-ssh-keys" onclick="save_editable_content('Mitarbeiter','editable-paragraph-expired-ssh-keys', 'page-folder')" type="button">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<path d="M12 20h9"></path>
<path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"></path>
</svg>
</button>
<div class="editable-paragraph" contenteditable="false" id="editable-paragraph-expired-ssh-keys"><pre>- Users ssh-keys on gitlab expire from time to time.


pege: <pan class="highlighterorange">"What usually happened in such a case is
that the authorization on GitLab expired, See https://gitlab.com/-/user_settings/ssh_keys.
GitLab change it's policy last year and, by default, authorizationsnow expire after a year
but you change choose another expiry date at creation. If you still have the
old key, you can just register it again.
</pan></pre></div>
</div>
</div>
</div>
</div>
</div>

<!--## feriensheet-ferienexcel #################################################################################################################-->
<div class="foldable-container" id="foldcontainer-feriensheet-ferienexcel">
<h2 class="foldable-title" id="foldable-title-feriensheet-ferienexcel">feriensheet-ferienexcel</h2>
<button class="foldable-content-unfoldbutton" id="foldable-content-unfoldbutton-newchapter" onclick="toggleFoldableContent('feriensheet-ferienexcel')" type="button">
<svg class="arrow-icon" fill="currentColor" height="16" viewBox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10l5 5 5-5H7z"></path>
</svg>
</button>
<button class="foldable-content-edittoggle" onclick="fetchEditableContent('Mitarbeiter','editable-paragraph-feriensheet-ferienexcel', 'foldable-content-penButton-feriensheet-ferienexcel')" type="button">
<svg class="wrench-icon" fill="currentColor" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M22.7 19.3l-4.1-4.1c.6-1.1.9-2.3.9-3.5 0-3.9-3.1-7-7-7-1.3 0-2.5.3-3.5.9l3.3 3.3-4 4-3.3-3.3C4.3 10.5 4 11.7 4 13c0 3.9 3.1 7 7 7 1.3 0 2.5-.3 3.5-.9l4.1 4.1c.4.4 1 .4 1.4 0l2.7-2.7c.4-.4.4-1 0-1.4z"></path>
</svg>
</button>
<button class="create-subdiv" id="create-subdiv-feriensheet-ferienexcel" onclick="add_subdiv('editable-paragraph-feriensheet-ferienexcel')" type='*button"'>
<svg class="add-tag-icon" fill="none" height="22" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
<!-- < and > symbols -->
<path d="M6 8l-4 4 4 4"></path> <!-- Left angle bracket -->
<path d="M18 8l4 4-4 4"></path> <!-- Right angle bracket -->
<!-- Plus sign in center -->
<path d="M12 10v4"></path>
<path d="M10 12h4"></path>
</svg>
</button>
<div class="foldable-content folded" id="foldable-content-feriensheet-ferienexcel">
<button class="foldable-content-penButton-hidden" id="foldable-content-penButton-feriensheet-ferienexcel" onclick="save_editable_content('Mitarbeiter','editable-paragraph-feriensheet-ferienexcel', 'page-folder')" type="button">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<path d="M12 20h9"></path>
<path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"></path>
</svg>
</button>
<div class="editable-paragraph" contenteditable="false" id="editable-paragraph-feriensheet-ferienexcel"><html><head></head><body><h1>Mabas 'wer hat wann Ferien Sheet'</h1>
<a 15="" :x:="" _layouts="" doc.aspx?sourcedoc='%7B2AE4BC2C-BFE4-4A94-893D-CE7691D950FB%7D&amp;file=2025_Ressourcenplanung.xlsx&amp;action=default&amp;mobileredirect=true&amp;DefaultItemOpen=1"' https:="" r="" sites="" technik="" tocco.sharepoint.com="">HERE</a></body></html></div>
</div>
</div>
</body></html><!--## wireguard-usersetup #################################################################################################################-->