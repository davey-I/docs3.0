<!DOCTYPE html>
<html><head>
<title data-folder-path="/VSHN">vshn-openshift</title>
<link href=" ../../static/style.css" rel="stylesheet"/>
<link href="../../prism/prism.css" rel="stylesheet"/>
</head>
<body class="body">
<div class="page-folder-header-div">
<h1 class="pagetitle" data-folder-path="VSHN">vshn-openshift</h1>
<a href="./../..">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<path d="M3 11L12 4L21 11"></path>
<path d="M5 10V20H19V10"></path>
<path d="M10 20V14H14V20"></path>
</svg>
</a>
</div>
<!-- Sidebar -->
<div class="sidbear-enclosure-open" id="sidbear-enclosure-open-vshn-openshift">
<button class="sidbear-enclosure-button-open" id="sidbear-enclosure-button-vshn-openshift" onclick="toggle_sidebar()" type="button">
<svg fill="white" height="30" viewBox="0 0 100 80" width="30" xmlns="http://www.w3.org/2000/svg">
<rect height="10" width="100"></rect>
<rect height="10" width="100" y="30"></rect>
<rect height="10" width="100" y="60"></rect>
</svg>
</button>
<div class="sidebar-mainbox-open" id="sidebar-mainbox-vshn-openshift">
<div class="sidebar-subbox-open" id="sidebar-subbox-1" onclick=" append_foldable_content()">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<circle cx="12" cy="12" r="10"></circle>
<line x1="12" x2="12" y1="8" y2="16"></line>
<line x1="8" x2="16" y1="12" y2="12"></line>
</svg>
</div>
<div class="sidebar-subbox-open" id="sidebar-subbox-2">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<circle cx="12" cy="12" r="10"></circle>
<path d="M9.09 9C9.32591 8.33109 9.78918 7.76807 10.4 7.41421C11.0108 7.06036 11.7266 6.93913 12.4152 7.07107C13.1038 7.20302 13.7206 7.57857 14.162 8.12132C14.6034 8.66407 14.8397 9.33984 14.83 10.03C14.83 12 12.5 12.5 12.5 14"></path>
<circle cx="12" cy="17" r="1"></circle>
</svg>
</div>
<div class="sidebar-subbox-open" id="sidebar-subbox-3">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<circle cx="12" cy="12" r="10"></circle>
<path d="M9.09 9C9.32591 8.33109 9.78918 7.76807 10.4 7.41421C11.0108 7.06036 11.7266 6.93913 12.4152 7.07107C13.1038 7.20302 13.7206 7.57857 14.162 8.12132C14.6034 8.66407 14.8397 9.33984 14.83 10.03C14.83 12 12.5 12.5 12.5 14"></path>
<circle cx="12" cy="17" r="1"></circle>
</svg>
</div>
</div>
</div>
<script src="../../prism/prism.js"></script>
<script src="../../static/script.js"></script>
<!--## oauth #################################################################################################################-->
<div class="foldable-container" id="foldcontainer-oauth">
<h2 class="foldable-title" id="foldable-title-oauth">oauth</h2>
<button class="foldable-content-unfoldbutton" id="foldable-content-unfoldbutton-newchapter" onclick="toggleFoldableContent('oauth')" type="button">
<svg class="arrow-icon" fill="currentColor" height="16" viewBox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10l5 5 5-5H7z"></path>
</svg>
</button>
<button class="foldable-content-edittoggle" onclick="fetchEditableContent('vshn-openshift','editable-paragraph-oauth', 'foldable-content-penButton-oauth')" type="button">
<svg class="wrench-icon" fill="currentColor" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M22.7 19.3l-4.1-4.1c.6-1.1.9-2.3.9-3.5 0-3.9-3.1-7-7-7-1.3 0-2.5.3-3.5.9l3.3 3.3-4 4-3.3-3.3C4.3 10.5 4 11.7 4 13c0 3.9 3.1 7 7 7 1.3 0 2.5-.3 3.5-.9l4.1 4.1c.4.4 1 .4 1.4 0l2.7-2.7c.4-.4.4-1 0-1.4z"></path>
</svg>
</button>
<button class="create-subdiv" id="create-subdiv-oauth" onclick="add_subdiv('editable-paragraph-oauth')" type='*button"'>
<svg class="add-tag-icon" fill="none" height="22" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
<!-- < and > symbols -->
<path d="M6 8l-4 4 4 4"></path> <!-- Left angle bracket -->
<path d="M18 8l4 4-4 4"></path> <!-- Right angle bracket -->
<!-- Plus sign in center -->
<path d="M12 10v4"></path>
<path d="M10 12h4"></path>
</svg>
</button>
<div class="foldable-content folded" id="foldable-content-oauth">
<button class="foldable-content-penButton-hidden" id="foldable-content-penButton-oauth" onclick="save_editable_content('vshn-openshift','editable-paragraph-oauth', 'page-folder')" type="button">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<path d="M12 20h9"></path>
<path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"></path>
</svg>
</button>
<div class="editable-paragraph" contenteditable="false" id="editable-paragraph-oauth"><pre>- we login via <b>oc login</b> or <b> oc login -w</b>

- if we don't use the <b>-w</b> option we receive a urs where we can

  fetch the API-token:


<pre><code class="lang-bash">
$ oc login
You must obtain an API token by visiting https://oauth-openshift.apps.openshift.tocco.ch/oauth/token/request
Alternatively, use "oc login --web" to login via your browser. See "oc login --help" for more information.

</code>
</pre>

On the page we see something like this:


<pre><code class="lang-bash">
Your API token is
sha256~z-jTePVW.......
Log in with this token
oc login --token=sha256~z-jTePVW..... --server=https://api.c-tocco-ocp4.tocco.ch:6443
Use this token directly against the API
curl -H "Authorization: Bearer sha256~z-jTePVW......" "https://api.c-tocco-ocp4.tocco.ch:6443/apis/user.openshift.io/v1/users/~"
</code>
</pre>
-
</pre></div>
</div>
</div>
<!--## traffic-routing #################################################################################################################-->
<div class="foldable-container" id="foldcontainer-traffic-routing">
<h2 class="foldable-title" id="foldable-title-traffic-routing">traffic-routing</h2>
<button class="foldable-content-unfoldbutton" id="foldable-content-unfoldbutton-newchapter" onclick="toggleFoldableContent('traffic-routing')" type="button">
<svg class="arrow-icon" fill="currentColor" height="16" viewBox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10l5 5 5-5H7z"></path>
</svg>
</button>
<button class="foldable-content-edittoggle" onclick="fetchEditableContent('vshn-openshift','editable-paragraph-traffic-routing', 'foldable-content-penButton-traffic-routing')" type="button">
<svg class="wrench-icon" fill="currentColor" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M22.7 19.3l-4.1-4.1c.6-1.1.9-2.3.9-3.5 0-3.9-3.1-7-7-7-1.3 0-2.5.3-3.5.9l3.3 3.3-4 4-3.3-3.3C4.3 10.5 4 11.7 4 13c0 3.9 3.1 7 7 7 1.3 0 2.5-.3 3.5-.9l4.1 4.1c.4.4 1 .4 1.4 0l2.7-2.7c.4-.4.4-1 0-1.4z"></path>
</svg>
</button>
<button class="create-subdiv" id="create-subdiv-traffic-routing" onclick="add_subdiv('editable-paragraph-traffic-routing')" type='*button"'>
<svg class="add-tag-icon" fill="none" height="22" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
<!-- < and > symbols -->
<path d="M6 8l-4 4 4 4"></path> <!-- Left angle bracket -->
<path d="M18 8l4 4-4 4"></path> <!-- Right angle bracket -->
<!-- Plus sign in center -->
<path d="M12 10v4"></path>
<path d="M10 12h4"></path>
</svg>
</button>
<div class="foldable-content folded" id="foldable-content-traffic-routing">
<button class="foldable-content-penButton-hidden" id="foldable-content-penButton-traffic-routing" onclick="save_editable_content('vshn-openshift','editable-paragraph-traffic-routing', 'page-folder')" type="button">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<path d="M12 20h9"></path>
<path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"></path>
</svg>
</button>
<div class="editable-paragraph" contenteditable="false" id="editable-paragraph-traffic-routing"><div class="foldable-container" id="foldcontainer-Discover-the-Dataflow">
<h2 class="foldable-title" id="foldable-title-Discover-the-Dataflow">Discover-the-Dataflow</h2>
<button class="foldable-content-unfoldbutton" id="foldable-content-unfoldbutton-newchapter" onclick="toggleFoldableContent('Discover-the-Dataflow')" type="button">
<svg class="arrow-icon" fill="currentColor" height="16" viewBox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10l5 5 5-5H7z"></path>
</svg>
</button>
<button class="foldable-content-edittoggle" onclick="fetchEditableContent('vshn-openshift','editable-paragraph-Discover-the-Dataflow', 'foldable-content-penButton-Discover-the-Dataflow')" type="button">
<svg class="wrench-icon" fill="currentColor" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M22.7 19.3l-4.1-4.1c.6-1.1.9-2.3.9-3.5 0-3.9-3.1-7-7-7-1.3 0-2.5.3-3.5.9l3.3 3.3-4 4-3.3-3.3C4.3 10.5 4 11.7 4 13c0 3.9 3.1 7 7 7 1.3 0 2.5-.3 3.5-.9l4.1 4.1c.4.4 1 .4 1.4 0l2.7-2.7c.4-.4.4-1 0-1.4z"></path>
</svg>
</button>
<div class="foldable-content folded" id="foldable-content-Discover-the-Dataflow">
<button class="foldable-content-penButton-hidden" id="foldable-content-penButton-Discover-the-Dataflow" onclick="save_editable_content('vshn-openshift','editable-paragraph-Discover-the-Dataflow', 'page-folder')" type="button">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<path d="M12 20h9"></path>
<path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"></path>
</svg>
</button>
<div class="editable-paragraph" contenteditable="false" id="editable-paragraph-Discover-the-Dataflow"><html><head></head><body><h1>Discover the Dataflow of Nice-Installation</h1>

<h3>Outside the Cluster</h3>
- Get the public DNS entry pointing to OpenShift
<pre><code class="lang-bash">
dig +short ${CUSTOMERNAME}.tocco.ch

#This gives us something like

; &lt;&lt;&gt;&gt; DiG 9.18.30-0ubuntu0.24.04.2-Ubuntu &lt;&lt;&gt;&gt; CUSTOMERNAME.OURDOMAIN.ch
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 890
;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 65494
;; QUESTION SECTION:
;CUSTOMERNAME.OURDOMAIN.ch. IN A

;; ANSWER SECTION:
CUSTOMERNAME.OURDOMAIN.ch. 3600 IN CNAME os4.OURDOMAIN.ch.
os4.OURDOMAIN.ch. 2666 IN A CLUSTERIP

;; Query time: 14 msec
;; SERVER: 127.0.0.53#53(127.0.0.53) (UDP)
;; WHEN: Tue Aug 12 12:17:46 CEST 2025
;; MSG SIZE rcvd: 79
</code></pre>

<h3>Inside the Cluster</h3>

-login via oc-client

<strong class="highlighterorange">Find the Route</strong>

<pre><code class="lang-bash">

oc get routes -n {namespace} -o wide

# We get back something like

NAME HOST/PORT PATH SERVICES PORT TERMINATION WILDCARD
nice-72xxf CUSTOMERNAME.OURDOMAIN.ch / nice 80-tcp edge/Redirect None
</code></pre>

<strong class="highlighterorange">Check Router Implementation</strong>

- typically <b>HAProxy pods</b> in the openshift-ingress namespace.

- If multiple, you likely have <b>multiple HAProxy</b> instances for load balancing.

<pre><code class="lang-bash">
oc get pods -n openshift-ingress -o wide

# We get back something like

NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
router-default-56f5fcd76d-647l4 2/2 Running 0 6d13h 172.18.200.242 infra-fc11 none none
router-default-56f5fcd76d-ddnkx 2/2 Running 0 6d13h 172.18.200.229 infra-a5b4 none none
router-default-56f5fcd76d-tjlll 2/2 Running 0 6d13h 172.18.200.170 infra-c235 none none
</code></pre>

<h3>Inside the Pod</h3>

<strong class="highlighterorange">Check container(s) in your app pod</strong>

- Look for containers — is there just Nginx + your app? Or a sidecar proxy?

<pre><code class="lang-bash">

oc describe pod <pod-name> -n <namespace>
# Or
oc get pods -n <namespace> -o yaml

</namespace></namespace></pod-name></code></pre>

<strong class="highlighterorange">Inspect Nginx config</strong>

<pre><code class="lang-bash">

oc rsh <pod-name>
cat /etc/nginx/nginx.conf # might be stored elswhere 

# The oc rsh command allows you to locally access and manage tools that are on the system.
# The secure shell (SSH) is the underlying technology and industry standard that provides
# a secure connection to the application.

</pod-name></code></pre>

- Inside the config we look for
<ul>
    <li>listen directive (port Nginx is binding to)</li>
    <li>proxy_pass target (how it sends traffic to your app process)</li>
</ul>


<div class="foldable-container" id="foldcontainer-Discover-the-Dataflow">
<h2 class="foldable-title" id="foldable-title-Discover-the-Dataflow">Discover-the-Dataflow</h2>
<button class="foldable-content-unfoldbutton" id="foldable-content-unfoldbutton-newchapter" onclick="toggleFoldableContent('Discover-the-Dataflow')" type="button">
<svg class="arrow-icon" fill="currentColor" height="16" viewBox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M7 10l5 5 5-5H7z"></path>
</svg>
</button>
<button class="foldable-content-edittoggle" onclick="fetchEditableContent('vshn-openshift','editable-paragraph-Discover-the-Dataflow', 'foldable-content-penButton-Discover-the-Dataflow')" type="button">
<svg class="wrench-icon" fill="currentColor" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M22.7 19.3l-4.1-4.1c.6-1.1.9-2.3.9-3.5 0-3.9-3.1-7-7-7-1.3 0-2.5.3-3.5.9l3.3 3.3-4 4-3.3-3.3C4.3 10.5 4 11.7 4 13c0 3.9 3.1 7 7 7 1.3 0 2.5-.3 3.5-.9l4.1 4.1c.4.4 1 .4 1.4 0l2.7-2.7c.4-.4.4-1 0-1.4z"></path>
</svg>
</button>
<div class="foldable-content folded" id="foldable-content-Discover-the-Dataflow">
<button class="foldable-content-penButton-hidden" id="foldable-content-penButton-Discover-the-Dataflow" onclick="save_editable_content('vshn-openshift','editable-paragraph-Discover-the-Dataflow', 'page-folder')" type="button">
<svg fill="none" height="30" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
<path d="M12 20h9"></path>
<path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"></path>
</svg>
</button>
<div class="editable-paragraph" contenteditable="false" id="editable-paragraph-Discover-the-Dataflow"><h1>TITLE IPSUM</h1></div>
</div>
</div></body></html></div>
</div>
</div>
</div>
</div>
</div>
</body></html><!--## Discover-the-Dataflow #################################################################################################################-->